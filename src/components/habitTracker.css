/* habitTracker.css */

/* Basic Resets & Font Imports (if using Google Fonts) */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

:root {
  --primary-color: #4CAF50; /* A friendly green */
  --primary-light: #81C784;
  --secondary-color: #2196F3; /* A calming blue for secondary elements if needed */
  --text-dark: #333333;
  --text-medium: #666666;
  --text-light: #999999;
  --bg-light: #F9F9F9;
  --bg-white: #FFFFFF;
  --border-light: #E0E0E0;
  --success-color: #4CAF50;
  --danger-color: #EF5350;
  --shadow-light: rgba(0, 0, 0, 0.05);
  --shadow-medium: rgba(0, 0, 0, 0.1);
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Inter', sans-serif;
  background-color: var(--bg-light);
  color: var(--text-dark);
  line-height: 1.6;
}

/* ------------------------------------------- */
/* General Layout & Container */
/* ------------------------------------------- */
.habit-tracker-container {
  max-width: 1200px;
  margin: 20px auto; /* Centered with some top/bottom margin */
  padding: 20px;
  background-color: var(--bg-white);
  border-radius: 12px;
  box-shadow: 0 4px 20px var(--shadow-medium);
}

/* ------------------------------------------- */
/* Header */
/* ------------------------------------------- */
.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 15px;
  margin-bottom: 20px;
  border-bottom: 1px solid var(--border-light);
}

.user-info {
  font-size: 0.95rem;
  color: var(--text-medium);
}

.logout-btn {
  background: none;
  border: none;
  color: var(--text-medium);
  cursor: pointer;
  font-size: 0.9rem;
  padding: 5px 10px;
  border-radius: 6px;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.logout-btn:hover {
  background-color: var(--border-light);
  color: var(--text-dark);
}

/* ------------------------------------------- */
/* Main Content Sections */
/* ------------------------------------------- */
.main-content {
  padding: 0 10px; /* Some horizontal padding for content */
}

.section-title {
  font-size: 2rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: 25px;
  text-align: center;
}

/* ------------------------------------------- */
/* Month Navigation */
/* ------------------------------------------- */
.month-navigation {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  margin-bottom: 30px;
}

.current-month-label {
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--text-dark);
}

/* ------------------------------------------- */
/* Buttons - General Styles */
/* ------------------------------------------- */
.nav-button,
.add-habit-btn,
.save-progress-btn {
  padding: 10px 20px;
  font-size: 1rem;
  font-weight: 600;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.2s ease, box-shadow 0.2s ease, color 0.2s ease;
}

/* Primary Button Style */
.add-habit-btn,
.save-progress-btn {
  background-color: var(--primary-color);
  color: var(--bg-white);
  box-shadow: 0 2px 8px var(--shadow-light);
}

.add-habit-btn:hover,
.save-progress-btn:hover {
  background-color: #388E3C; /* A slightly darker green */
  box-shadow: 0 4px 12px var(--shadow-medium);
}

/* Navigation Button Style (outlined/secondary) */
.nav-button {
  background-color: var(--bg-white);
  color: var(--primary-color);
  border: 1px solid var(--primary-color);
}

.nav-button:hover {
  background-color: var(--primary-color);
  color: var(--bg-white);
}

/* ------------------------------------------- */
/* Add New Habit Form */
/* ------------------------------------------- */
.add-habit-form {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
  justify-content: center;
}

.add-habit-input {
  flex-grow: 1; /* Allows input to take available space */
  max-width: 400px; /* Limit max width for aesthetic */
  padding: 12px 15px;
  border: 1px solid var(--border-light);
  border-radius: 8px;
  font-size: 1rem;
  color: var(--text-dark);
}

.add-habit-input::placeholder {
  color: var(--text-light);
}

.add-habit-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
}

/* ------------------------------------------- */
/* Habit Table */
/* ------------------------------------------- */
.habit-table-container {
  overflow-x: auto; /* Allows horizontal scrolling on small screens */
  -webkit-overflow-scrolling: touch; /* Improves scrolling performance on iOS */
  margin-bottom: 30px;
  border: 1px solid var(--border-light);
  border-radius: 10px;
  box-shadow: 0 2px 10px var(--shadow-light);
}

.habit-table {
  width: 100%;
  border-collapse: collapse; /* Remove default table borders */
}

.habit-table th,
.habit-table td {
  padding: 12px 8px;
  text-align: center;
  border: 1px solid var(--border-light); /* Finer grid lines */
  white-space: nowrap; /* Prevent day headers from wrapping */
}

.habit-table th {
  background-color: var(--primary-light);
  color: var(--bg-white);
  font-weight: 600;
  position: sticky; /* Sticky header for long tables */
  top: 0;
  z-index: 10;
}

.habit-table tr:nth-child(even) {
  background-color: var(--bg-light); /* Zebra striping */
}

.habit-table tr:hover {
  background-color: rgba(76, 175, 80, 0.05); /* Subtle hover effect */
}

.habit-name-cell {
  text-align: left;
  font-weight: 500;
  color: var(--text-dark);
}

/* Custom Checkbox Styling */
.custom-checkbox {
  appearance: none; /* Hide default checkbox */
  -webkit-appearance: none;
  width: 24px;
  height: 24px;
  border: 2px solid var(--primary-color);
  border-radius: 4px;
  background-color: var(--bg-white);
  cursor: pointer;
  position: relative;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

.custom-checkbox:checked {
  background-color: var(--success-color);
  border-color: var(--success-color);
}

.custom-checkbox:checked::after {
  content: 'âœ“'; /* Checkmark symbol */
  font-size: 16px;
  color: var(--bg-white);
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.custom-checkbox:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
}

/* Action Icons (Edit/Delete) */
.action-icons-cell {
  display: flex;
  gap: 8px;
  justify-content: center;
}

.action-icon-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
  font-size: 1.1rem;
  color: var(--text-medium);
  transition: color 0.2s ease;
}

.action-icon-btn.edit:hover {
  color: var(--secondary-color);
}

.action-icon-btn.delete:hover {
  color: var(--danger-color);
}

/* Adjust the width of the day columns in the table to match pots */
.habit-table th:nth-child(n+3), /* Targets all <th> after the first two ("Daily Habits", "Completed") */
.habit-table td:nth-child(n+3) { /* Targets all <td> after the first two (habit name, completed count) */
  min-width: 110px; /* Default min-width for days on larger screens */
  width: 110px; /* Fixed width to align with daily-progress-card. Fine-tune if needed. */
}


/* ------------------------------------------- */
/* Week Controls (already styled by .nav-button) */
/* ------------------------------------------- */
.week-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  margin-top: 20px;
  margin-bottom: 40px;
}

.week-indicator {
  font-size: 1.1rem;
  font-weight: 500;
  color: var(--text-dark);
}

/* ------------------------------------------- */
/* Weekly Progress (Plant Visuals) - UPDATED FOR INLINE SVGS */
/* ------------------------------------------- */
.weekly-progress-section {
  margin-top: 40px;
  padding: 20px;
  background-color: var(--bg-white);
  border-radius: 12px;
  box-shadow: 0 2px 10px var(--shadow-light);
  margin-bottom: 40px;
}

.weekly-progress-section .section-title { /* Target the H2 specifically within this section */
  margin-bottom: 25px; /* Ensure consistent spacing for section title */
}

.progress-grid {
  display: flex; /* Changed from grid to flex for horizontal scrolling */
  overflow-x: auto; /* Enables horizontal scrolling */
  -webkit-overflow-scrolling: touch; /* Improves scrolling performance on iOS */
  gap: 15px; /* Space between cards */
  padding-bottom: 10px; /* Add some padding if scrollbar is at the very bottom */
  justify-content: flex-start; /* Align items to the start for better scrolling on mobile */
  align-items: flex-end; /* Align cards to the bottom (helpful if cards have different heights initially) */
}

/* Optional: Hide scrollbar for a cleaner look (but still allow scrolling) */
.progress-grid::-webkit-scrollbar {
  display: none; /* For Chrome, Safari, and Opera */
}

.progress-grid {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.daily-progress-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 15px;
  border-radius: 8px;
  background-color: var(--bg-light);
  /* CRITICAL CHANGE: Be very explicit with flex-shrink and width */
  flex: 0 0 120px; /* Do not grow (0), do not shrink (0), base width 120px */
                 /* This ensures each card takes exactly 120px + gap */
  min-height: 180px; /* Ensure consistent height for visual alignment of cards */
  justify-content: flex-end; /* Push content (plant + percentage) to bottom of card */
  position: relative; /* For general positioning context */
  box-shadow: 0 1px 5px var(--shadow-light); /* Subtle shadow for cards */
}

.daily-progress-card .day-label {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 10px; /* Space between day label and plant container */
}

.plant-container {
  width: 100%; /* Container for the SVG to allow it to scale */
  height: 100px; /* Fixed height for the plant drawing area */
  display: flex;
  justify-content: center; /* Center the SVG horizontally */
  align-items: flex-end; /* Align the SVG to the bottom of the container */
  position: relative;
  overflow: hidden; /* Hide any overflow of the SVG content */
}

.plant-container svg { /* Target the SVG element directly inside plant-container */
  max-width: 100%;
  max-height: 100%;
  display: block; /* Remove extra space below inline elements */
  height: auto; /* Allow height to scale proportionally with width */
}

.daily-progress-card .percentage {
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-top: 15px; /* Space between plant and percentage */
}


/* ------------------------------------------- */
/* Monthly Summary */
/* ------------------------------------------- */
.monthly-summary-section {
  margin-top: 40px;
  padding: 20px;
  background-color: var(--bg-white);
  border-radius: 12px;
  box-shadow: 0 2px 10px var(--shadow-light);
}

.monthly-summary-section .section-title { /* Target the H2 specifically within this section */
  margin-bottom: 25px; /* Ensure consistent spacing for section title */
}

.summary-item {
  margin-bottom: 20px;
}

.summary-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.habit-name-summary {
  font-weight: 600;
  color: var(--text-dark);
  font-size: 1.05rem;
}

.summary-percentage {
  font-weight: 700;
  color: var(--primary-color);
  font-size: 1.1rem;
}

.progress-bar-container {
  width: 100%;
  background-color: var(--border-light);
  border-radius: 10px;
  height: 12px;
  overflow: hidden; /* Ensures the fill stays within bounds */
}

.progress-bar-fill {
  height: 100%;
  background-color: var(--success-color); /* Green for progress */
  border-radius: 10px;
  transition: width 0.5s ease-out; /* Smooth transition for progress */
}

/* --- NEW: Edit Habit Styles --- */
.habit-name-cell.edit-mode {
  padding: 0; /* Remove padding from cell to allow input to fill */
}

.edit-habit-input {
  width: 100%;
  padding: 10px 8px; /* Slightly less padding than table cell */
  border: 1px solid var(--primary-color);
  border-radius: 6px;
  font-size: 0.95rem; /* Match font size of habit name */
  color: var(--text-dark);
  box-sizing: border-box; /* Include padding/border in width */
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.edit-habit-input:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
}

.action-icon-btn.save {
  color: var(--success-color);
}

.action-icon-btn.save:hover {
  background-color: rgba(76, 175, 80, 0.1);
}

.action-icon-btn.cancel {
  color: var(--danger-color);
}

.action-icon-btn.cancel:hover {
  background-color: rgba(239, 83, 80, 0.1);
}


/* Monthly Summary Chart container and base styles */
.overall-monthly-chart-container {
  /* Default width for larger screens when legend is on the right */
  width: 450px;
  height: 300px;
  margin: 20px auto;
  position: relative;
  /* On desktop, keep flex for centering chart and legend together if needed */
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Ensure existing section and title styles are consistent */
.monthly-summary-section {
  padding: 20px;
  background-color: var(--bg-white); /* Use variable for consistency */
  border-radius: 10px;
  margin-top: 30px;
  text-align: center; /* Center the title */
  box-shadow: 0 2px 10px var(--shadow-light); /* Add shadow for consistency */
}

.section-title {
  color: var(--primary-color); /* Use variable for consistency */
  margin-bottom: 25px;
  font-size: 1.8em;
}

/* Styles for the optional detail list below the chart */
.summary-list-below-chart {
  margin-top: 30px;
  max-width: 500px; /* Constrain width for readability */
  margin-left: auto;
  margin-right: auto;
  padding: 0 15px; /* Add some padding on sides */
}

.habit-detail-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid #eee;
  font-size: 0.95em;
  color: #555;
}

.habit-detail-item:last-child {
  border-bottom: none;
}

.habit-detail-name {
  font-weight: bold;
  color: #333;
}
.habit-detail-percentage {
    color: var(--success-color); /* Use variable for consistency */
}

.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  background-color: #f5f5f5; /* A light background */
}

.header-brand {
  display: flex;
  align-items: baseline;
  gap: 10px; /* Space between title and version */
}

.app-title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
}

.attribution {
  font-size: 0.8rem;
  color: #555;
}
.app-footer {
  text-align: center;
  padding: 20px 0;
  color: #888; /* A light gray for a subtle look */
  font-size: 0.85rem;
}

.attribution {
  margin: 0;
}
/* ------------------------------------------- */
/* Media Queries for Responsiveness - REFINED */
/* ------------------------------------------- */
@media (max-width: 768px) {
  .habit-tracker-container {
    margin: 10px;
    padding: 15px;
    border-radius: 8px;
  }

  .app-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 15px;
  }

  .logout-btn {
    align-self: flex-end; /* Push logout to the right */
  }

  .section-title {
    font-size: 1.7rem;
    margin-bottom: 20px;
  }

  .month-navigation,
  .add-habit-form {
    flex-direction: column;
    gap: 10px;
  }

  .add-habit-input {
    width: 100%;
    max-width: none;
  }

  .nav-button,
  .add-habit-btn,
  .save-progress-btn {
    width: 100%;
    padding: 12px 15px;
  }

  .habit-table th,
  .habit-table td {
    padding: 10px 5px;
    font-size: 0.9rem;
  }

  /* Adjust table column width for mobile to match the smaller pot size */
  .habit-table th:nth-child(n+3),
  .habit-table td:nth-child(n+3) {
    min-width: 85px; /* Adjusted to be slightly smaller for better fit */
    width: 85px; /* Adjusted to be slightly smaller for better fit */
  }

  /* Adjust grid for smaller screens */
  .progress-grid {
    gap: 8px; /* Slightly smaller gap on mobile */
    padding-left: 5px; /* Add slight padding to the left to avoid being too close to edge */
    padding-right: 5px; /* Add slight padding to the right */
  }

  .daily-progress-card {
    flex: 0 0 95px; /* Adjusted fixed width for mobile */
    min-height: 140px; /* Slightly reduced height */
    padding: 10px; /* Slightly less padding */
  }

  .plant-container {
    height: 70px; /* Adjust height for smaller screens */
  }

  .daily-progress-card .percentage {
    font-size: 0.9rem;
  }

  /* Monthly Summary Chart specific adjustments for 768px */
  .overall-monthly-chart-container {
    width: 100%; /* Take full width on smaller screens */
    height: 250px; /* Adjust height for mobile */
    /* When legend is at bottom, let Chart.js handle positioning within the canvas.
       We change to display: block to ensure full width usage and proper flow for the legend below. */
    display: block; /* Ensures it takes full width and allows content below */
  }

  /* Style for Chart.js legend when it's positioned at the bottom */
  /* This targets the <ul> element that is immediately after the <canvas> element */
  .overall-monthly-chart-container canvas + div ul {
    text-align: left; /* Aligns the legend items (text) to the left */
    padding-left: 15px; /* Add some padding from the left edge of the container */
    padding-right: 15px; /* Add some padding from the right edge */
    margin-top: 10px; /* Add some space between the chart and the legend */
  }

  /* Further fine-tuning for individual legend items if needed */
  .overall-monthly-chart-container canvas + div ul li {
    margin-bottom: 5px; /* Space between legend items */
  }

  /* Optional: Adjust font size for legend on smaller screens */
  .overall-monthly-chart-container canvas + div ul li span {
    font-size: 13px; /* Slightly smaller font for legend labels */
  }

  /* Adjust chart legend position for mobile title */
  .monthly-summary-section .section-title {
    font-size: 1.5em; /* Smaller title */
  }
}

@media (max-width: 480px) {
  .section-title {
    font-size: 1.3rem;
  }

  .habit-table th,
  .habit-table td {
    font-size: 0.75rem;
  }

  /* Adjust table column width for very small mobile to match */
  .habit-table th:nth-child(n+3),
  .habit-table td:nth-child(n+3) {
    min-width: 75px; /* Even smaller fixed width */
    width: 75px; /* Even smaller fixed width */
  }

  /* Stack navigation buttons for very small screens */
  .month-navigation,
  .week-controls {
    flex-direction: column;
    gap: 8px;
  }

  .current-month-label, .week-indicator {
    order: -1; /* Place label on top */
  }

  .daily-progress-card {
    flex: 0 0 85px; /* Even smaller fixed width for very small screens */
    min-height: 130px;
  }

  .plant-container {
    height: 60px; /* Smaller plant container height */
  }

  .daily-progress-card .day-label {
    font-size: 0.9rem;
  }

  .daily-progress-card .percentage {
    font-size: 0.8rem;
  }

  /* Monthly Summary Chart specific adjustments for 480px */
  .overall-monthly-chart-container {
    height: 200px;
  }

  .overall-monthly-chart-container canvas + div ul {
    padding-left: 10px; /* Adjust padding for smaller screens */
    padding-right: 10px;
  }

  .overall-monthly-chart-container canvas + div ul li span {
    font-size: 12px; /* Even smaller font */
  }
}